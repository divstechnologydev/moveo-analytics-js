!function(t){if(t.MoveoOne)return;class e{constructor(e){this.token=e,this.userId="",this.buffer=[],this.flushInterval=1e4,this.maxThreshold=500,this.context=t.location.pathname,this.sessionId=this.generateUUID(),this.started=!1,setInterval((()=>this.flush()),this.flushInterval)}initialize(){this.start(),this.track("page_view",{semanticGroup:"navigation",id:t.location.pathname,type:"page",action:"view",value:document.title}),this.setupClickTracking(),this.setupScrollTracking(),this.setupFormTracking()}identify(t){this.userId=t}track(t,e){const i={c:this.context,type:"track",userId:this.userId,t:Date.now(),prop:{sg:e.semanticGroup,eID:e.id,eA:e.action,eT:e.type,eV:e.value||""},meta:e.metadata||{},sId:this.sessionId};this.buffer.push(i),this.buffer.length>=this.maxThreshold&&this.flush()}start(){const t={c:this.context,type:"start_session",userId:this.userId,t:Date.now(),prop:{},meta:{},sId:this.sessionId};this.buffer.push(t),this.buffer.length>=this.maxThreshold&&this.flush()}flush(){if(0===this.buffer.length)return;const t=[...this.buffer];this.buffer=[],fetch("https://api.moveo.one/api/analytic/event",{method:"POST",headers:{Authorization:this.token,"Content-Type":"application/json"},body:JSON.stringify({events:t})}).catch((t=>console.error("MoveoOne Error:",t)))}setupClickTracking(){document.addEventListener("click",(t=>{let e=t.target,i=e.tagName.toLowerCase();if(!["a","button","input","select"].includes(i)){if(e=e.closest('a, button, input[type="button"], input[type="submit"], select'),!e)return;i=e.tagName.toLowerCase()}const n={semanticGroup:"interaction",id:e.id||e.name||e.href||"unnamed_element",type:i,action:"click",value:e.textContent?.trim()||e.value||"",metadata:{path:`${this.getElementPath(e)}`,href:`${e.href}`}};this.track("click",n)}))}setupScrollTracking(){let e,i=0;t.addEventListener("scroll",(()=>{clearTimeout(e),e=setTimeout((()=>{const e=t.scrollY,n=Math.round(e/(document.documentElement.scrollHeight-t.innerHeight)*100);Math.abs(e-i)>100&&(this.track("scroll",{semanticGroup:"interaction",id:"page_scroll",type:"scroll",action:"scroll",value:n.toString(),metadata:{position:`${e}`}}),i=e)}),500)}))}setupFormTracking(){document.addEventListener("submit",(t=>{const e=t.target;this.track("form_submit",{semanticGroup:"interaction",id:e.id||e.name||"unnamed_form",type:"form",action:"submit",value:"",metadata:{path:`${this.getElementPath(e)}`}})})),document.addEventListener("change",(t=>{const e=t.target;["select","input","textarea"].includes(e.tagName.toLowerCase())&&this.track("form_change",{semanticGroup:"interaction",id:e.id||e.name||"unnamed_input",type:e.type||e.tagName.toLowerCase(),action:"change",value:"password"===e.type?"[REDACTED]":e.value,metadata:{path:`${this.getElementPath(e)}`}})}))}getElementPath(t){const e=[];for(;t&&t.nodeType===Node.ELEMENT_NODE;){let i=t.nodeName.toLowerCase();t.id?i+="#"+t.id:t.className&&(i+="."+t.className.replace(/\s+/g,".")),e.unshift(i),t=t.parentNode}return e.join(" > ")}generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}}t.MoveoOne={init:function(t){const i=new e(t);return i.initialize(),i}}}(window);